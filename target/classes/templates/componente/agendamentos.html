<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0 shrink-to-fit=no" charset="utf-8">
<title>Start</title>
<link href="/imagens/logo_pp.png" rel="icon" type="image/x-icon" />

<link href="/css/main.css" rel="stylesheet" />

<!-- WEBJARS -->
<script src="/webjars/jquery/3.4.1/jquery.min.js"></script>
<script src="/webjars/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="/webjars/bootstrap/4.3.1/css/bootstrap.min.css" />

</head>
<body class="bg-light">
	<section th:fragment="agendamentos (agendamentos, titulo)">
		<div class="row justify-content-center shadow-sm rounded mt-3 p-3">
			<div class="col-12">
				<h5 class="text-center" th:text="${titulo}"></h5>
			</div>
			<div class="col-auto mt-2">
				<table class="table table-hover table-striped  table-responsive table-sm mt-2">
					<thead class="thead-dark">
						<tr>
							<th class="text-left font-weight-normal" scope="col">Start</th>
							<th class="text-left font-weight-normal" scope="col">Coach</th>
							<th class="text-center font-weight-normal" scope="col">Agendamento</th>
							<th class="text-center font-weight-normal" scope="col">Tempo de Agendamento</th>
							<th class="text-center font-weight-normal" scope="col" />
							<th class="text-center font-weight-normal" scope="col" />
						</tr>
					</thead>
		
					<tbody>
						<tr th:each="item : ${agendamentos}" th:style="${'background-color:'+item.coach.cor.corFundo+';color:'+item.coach.cor.corFonte+';'}">
							<td class="text-left align-middle" th:text="${item.start.nome}" scope="row" />
							<td class="text-left align-middle" th:text="${item.coach.nome}" scope="row" />
							<td class="text-center align-middle" th:text="${item.nome}" scope="row" />
							<td class="text-center align-middle" th:text="${item.mensagemDataHora()}" scope="row" />
							<td class="text-center align-middle" scope="row">
								<a th:if="${usuario.nome.equals(item.coach.nome)}" class="btn btn-warning btn-sm" th:href="${item.link}">Abrir</a>
							</td>
							<td class="text-center align-middle" scope="row">
								<div th:if="${usuario.hasAnyRole('ROLE_EDITAR')}">
									<!-- BotÃ£o Modal -->
									<button type="button" class="btn btn-danger btn-sm" data-toggle="modal" th:data-target="${'#modalExcluirAgendamento'+item.id}" >Excluir</button>
									
									<!-- Modal -->
									<div class="modal fade" th:id="${'modalExcluirAgendamento'+item.id}" tabindex="-1" role="dialog" aria-labelledby="TituloModalCentralizado" aria-hidden="true">
										<div class="modal-dialog modal-dialog-centered" role="document">
											<div class="modal-content">
												<div class="modal-header">
													<h5 class="modal-title text-center" id="TituloModalCentralizado">Excluir Agendamento</h5>
													<button type="button" class="close" data-dismiss="modal" aria-label="Fechar">
														<span aria-hidden="true">&times;</span>
													</button>
												</div>
												<div class="modal-body">
													Deseja mesmo excluir o Agendamento ?
												</div>
												<div class="modal-footer">
													<button class="btn btn-secondary btn-sm" type="button" data-dismiss="modal">Cancelar</button>
													<a class="btn btn-danger btn-sm" th:href="${item.linkExcluir}">Excluir</a>
												</div>
											</div>
										</div>
									</div>
								</div>				
							</td>							
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</section>
</body>
</html>